<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liquid Glass Cards ❤️</title>

    <style>
        * {
            box-sizing: border-box;
            font-family: "Segoe UI", system-ui, sans-serif;
        }

        body {
            margin: 0;
            min-height: 100vh;
            background:
                    radial-gradient(circle at 20% 20%, #ffe6f2, transparent 45%),
                    radial-gradient(circle at 80% 30%, #e6f0ff, transparent 45%),
                    linear-gradient(#f4f5f7, #f7e6ea);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            perspective: 1400px;
        }

        canvas {
            position: fixed;
            inset: 0;
            z-index: 0;
        }

        .app {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 26px;
            padding: 20px;
        }

        h1 {
            margin: 0;
            font-size: clamp(22px, 4vw, 28px);
            font-weight: 800;
        }
        .subtitle {
            font-size: 14px;
            color: #666;
        }

        .card-container {
            width: min(92vw, 340px);
            height: min(82vh, 520px);
            position: relative;
            perspective: 1400px;
        }

        /* ================================ */
        /* УПАКОВКА ПОДАРКА (как на картинке) */
        /* ================================ */

        .gift-wrap {
            position: absolute;
            inset: 0;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity .6s ease, transform .6s ease;
            pointer-events: none;
        }

        .gift-wrap img {
            width: 100%;
            max-width: 1060px;
            pointer-events: none;
        }

        .gift-wrap.hidden {
            opacity: 0;
            transform: scale(.8);
        }

        /* ================================ */
        /* КАРТОЧКА (скрыта пока в упаковке) */
        /* ================================ */

        .card {
            width: 100%;
            height: 100%;
            border-radius: 32px;
            padding: 18px;
            display: flex;
            flex-direction: column;
            gap: 14px;

            background: rgba(255,255,255,0.48);
            backdrop-filter: blur(24px) saturate(1.35);

            box-shadow:
                    0 50px 100px rgba(0,0,0,0.3),
                    inset 0 0 0 1px rgba(255,255,255,0.45),
                    inset 0 12px 26px rgba(255,255,255,0.25);

            transform-style: preserve-3d;
            transition: transform .8s cubic-bezier(.68,-0.55,.27,1.55), opacity .35s ease;
            position: relative;
            overflow: hidden;

            /* Спрятано, пока подарок не открыт */
            transform: scale(.6) rotateX(80deg);
            opacity: 0;
            pointer-events: none;
        }

        .card.unwrapped {
            transform: none;
            opacity: 1;
            pointer-events: auto;
            transition: transform .18s ease, opacity .35s ease;
        }

        .card.hidden {
            opacity: 0;
            transform: scale(.96);
        }

        .water {
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 50% 0%, rgba(255,255,255,.6), transparent 60%);
            opacity: 0;
            pointer-events: none;
        }

        .card.water-flow .water {
            animation: waterFlow .7s ease-out;
        }

        @keyframes waterFlow {
            0% { opacity: 0; transform: translateY(-30%); }
            30% { opacity: .55; }
            100% { opacity: 0; transform: translateY(100%); }
        }

        .photo {
            height: 46%;
            border-radius: 24px;
            background-size: cover;
            background-position: center;
            transform: translateZ(40px);
            box-shadow:
                    0 20px 40px rgba(0,0,0,.35),
                    inset 0 0 0 1px rgba(255,255,255,.45);
        }

        .text {
            flex: 1;
            display: flex;
            align-items: center;
            transform: translateZ(30px);
        }

        .text-inner {
            width: 100%;
            padding: 18px;
            border-radius: 24px;
            background: rgba(255,255,255,.6);
            backdrop-filter: blur(16px);
            box-shadow:
                    0 14px 30px rgba(0,0,0,.22),
                    inset 0 0 0 1px rgba(255,255,255,.45);

            font-size: 1.18em;
            font-weight: 700;
            line-height: 1.4;
        }

        .text.final {
            text-align: center;
        }

        .text.final .main {
            font-size: 1.7em;
            font-weight: 900;
            color: #ff3f96;
            margin: 10px 0;
        }

        .text.final .sign {
            font-size: .85em;
            margin-top: 14px;
        }

        .card-footer {
            display: flex;
            justify-content: flex-end;
            transform: translateZ(26px);
        }

        .badge {
            padding: 8px 16px;
            border-radius: 18px;
            font-size: 14px;
            font-weight: 800;
            background: rgba(255,255,255,.6);
            backdrop-filter: blur(12px);
            box-shadow:
                    0 12px 26px rgba(0,0,0,.3),
                    inset 0 0 0 1px rgba(255,255,255,.45);
        }

        .nav {
            display: flex;
            gap: 36px;
        }

        .nav button.open-button {
            background-color: #ff69b4;
            color: white;
            box-shadow: 0 18px 36px rgba(255,105,180,.5);
        }

        .nav button {
            width: 68px;
            height: 68px;
            border-radius: 50%;
            border: none;
            font-size: 30px;
            font-weight: 900;
            cursor: pointer;

            background: rgba(255,255,255,.55);
            backdrop-filter: blur(14px);
            box-shadow:
                    0 18px 36px rgba(0,0,0,.35),
                    inset 0 0 0 1px rgba(255,255,255,.45);

            transition: transform .15s ease, background-color .3s, box-shadow .3s;
        }

        .nav button:active {
            transform: scale(.9);
        }

        @media (max-width:480px) {
            .nav button {
                width: 72px;
                height: 72px;
                font-size: 34px;
            }
        }
    </style>
</head>
<body>

<canvas id="bg"></canvas>

<div class="app">
    <h1>Карточки ❤️</h1>
    <div class="subtitle">Нажми "Открыть"</div>

    <div class="card-container">

        <!-- УПАКОВКА ПОДАРКА -->
        <div class="gift-wrap">
            <img src="/Photo/acetone-2025129-231531-141.png" alt="gift">
        </div>

        <!-- КАРТОЧКА -->
        <div class="card">
            <div class="water"></div>
            <div class="photo"></div>
            <div class="text"><div class="text-inner"></div></div>
            <div class="card-footer"><div class="badge"></div></div>
        </div>
    </div>

    <div class="nav">
        <button id="prev" style="display:none;">‹</button>
        <button id="next" class="open-button">Открыть</button>
    </div>
</div>

<script>
    const BADGE_TEXT = "#кызым";

    const cards = [
        { text:"Твоя улыбка — моё любимое произведение искусства.", photo:"Photo/IMG_1948.JPG" },
        { text:"Даже когда ты злишься — ты всё равно самая красивая.", photo:"Photo/IMG_1954.JPG" },
        { text:"Ты умеешь делать мой мир теплее.", photo:"Photo/IMG_1963.JPG" },
        { text:"С тобой даже обычные моменты становятся важными.", photo:"Photo/photo_2025-12-09_23-18-48.jpg" },
        { text:"Ты — моя поддержка и вдохновение.", photo:"Photo/photo_2025-12-09_23-18-53.jpg" },
        { text:"Я благодарен судьбе за тебя каждый день. хаха❤️ ️ ", photo:"Photo/photo_2025-12-09_23-18-59.jpg" },
        {
            final:true,
            photo:"Photo/photo_2025-12-09_23-19-05.jpg",
            html:`<div>Ты единственная и неповторимая.</div>
                  <div class="main">ТЫ ИДЕАЛЬНА!</div>
                  <div class="sign">С любовью,<br>твой Козёл ❤️</div>`
        }
    ];

    let i = 0;
    const card = document.querySelector(".card");
    const photo = document.querySelector(".photo");
    const text = document.querySelector(".text");
    const inner = document.querySelector(".text-inner");
    const badge = document.querySelector(".badge");
    const water = document.querySelector(".water");
    const nextButton = document.getElementById("next");
    const prevButton = document.getElementById("prev");
    const giftWrap = document.querySelector(".gift-wrap");

    let isWrapped = true;

    function unwrapCard() {
        if (!isWrapped) return;
        isWrapped = false;

        giftWrap.classList.add("hidden");

        card.classList.add("unwrapped");

        nextButton.textContent = "›";
        nextButton.classList.remove("open-button");

        setTimeout(() => {
            render(true);
            updateNavigation();
        }, 800);
    }

    function updateNavigation() {
        if (!isWrapped) {
            prevButton.style.display = i > 0 ? 'block' : 'none';
            nextButton.innerHTML = i === cards.length - 1 ? "↻" : "›";
        }
    }

    function render(skipAnimation = false) {
        if (isWrapped) return;

        card.classList.add("hidden");
        if (!skipAnimation) {
            card.classList.add("water-flow");
        }

        setTimeout(() => {
            const d = cards[i];
            photo.style.backgroundImage = `url('${d.photo}')`;

            if (d.final) {
                text.className = "text final";
                inner.innerHTML = d.html;
                badge.style.display = "none";
            } else {
                text.className = "text";
                inner.textContent = d.text;
                badge.style.display = "block";
                badge.textContent = BADGE_TEXT;
            }

            card.classList.remove("hidden");
            updateNavigation();
        }, 250);

        if (!skipAnimation) {
            setTimeout(() => card.classList.remove("water-flow"), 800);
        }
    }

    nextButton.onclick = () => {
        if (isWrapped) {
            unwrapCard();
        } else {
            i = (i + 1) % cards.length;
            render();
        }
    };

    prevButton.onclick = () => {
        if (i > 0 && !isWrapped) {
            i--;
            render();
        }
    };

    /* ===== НАКЛОН КАРТОЧКИ ===== */
    card.addEventListener("mousemove", e => {
        if (isWrapped) return;
        const r = card.getBoundingClientRect();
        const x = (e.clientX - r.left) / r.width - .5;
        const y = (e.clientY - r.top) / r.height - .5;
        card.style.transform = `rotateX(${-y * 7}deg) rotateY(${x * 7}deg)`;
    });

    card.addEventListener("mouseleave", () => {
        if (isWrapped) return;
        card.style.transform = "rotateX(0) rotateY(0)";
    });

    /* ===== ФОН СЕРДЕЦ ===== */
    const c = document.getElementById("bg");
    const ctx = c.getContext("2d");
    function resize() {
        c.width = innerWidth;
        c.height = innerHeight;
    }
    addEventListener("resize", resize);
    resize();

    const hearts = [...Array(40)].map(() => ({
        x: Math.random() * c.width,
        y: Math.random() * c.height,
        s: 6 + Math.random() * 10,
        v: .25 + Math.random() * .45
    }));

    function heart(x, y, s) {
        ctx.save();
        ctx.translate(x, y);
        ctx.scale(s / 10, s / 10);
        ctx.beginPath();
        ctx.moveTo(0, 3);
        ctx.bezierCurveTo(-5, -3, -10, 2, 0, 10);
        ctx.bezierCurveTo(10, 2, 5, -3, 0, 3);
        ctx.fillStyle = "rgba(255,105,180,.22)";
        ctx.fill();
        ctx.restore();
    }

    (function loop() {
        ctx.clearRect(0,0,c.width,c.height);
        hearts.forEach(h => {
            h.y -= h.v;
            if (h.y < -20) h.y = c.height + 20;
            heart(h.x, h.y, h.s);
        });
        requestAnimationFrame(loop);
    })();
</script>

</body>
</html>
